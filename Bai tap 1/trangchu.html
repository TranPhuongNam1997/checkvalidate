
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
	<script src="script.js"></script>
	<style>
		.container{
			max-width: 500px;
		}
		.error{
			display: none;
			color: blue;
		}
	</style>
	
<body>
	<div class="container mt-5">
		<h1 class="text-center">Đăng nhập</h1>
		<form>
		  <div class="form-group">
		    <label for="exampleInputEmail1">Tài khoản</label>
		    <input type="email" class="form-control" id="inputAccount" placeholder="Nhập tài khoản" onblur="checkAccount()">
		    <p class="error" id="er-account">Tài khoản không đúng định dạng</p>
		    <p class="error" id="er-accountnotnull">Không được để trống</p>
		  </div>
		  <div class="form-group">
		    <label for="exampleInputPassword1">Mật khẩu</label>
		    <input type="password" class="form-control" id="inputPassword" placeholder="Mật khẩu" onblur="checkPassword()">
		    <p class="error" id="er-password">Không được để trống</p>
		  </div>
		  <div class="text-center">
		  	<button type="button" class="btn btn-primary w-100" id="login">Đăng nhập</button>
		  </div>
		</form>
		<div class="d-flex justify-content-between align-items-center mt-3">
			<a href="javascript:0;" id="create-ac">Tạo tài khoản</a>
			<a href="javascript:0;">Quên mật khẩu</a>
		</div>
	</div>
	
	<script>
		//khai bao bien
		var accountVl = document.getElementById("inputAccount");
		var passwordVl = document.getElementById("inputPassword");


		// chuyen huong den trang dang ky
		var redirectregis = document.getElementById('create-ac');
	    redirectregis.onclick = function(){
	   		window.location.href = "dangky.html";
	   		// window.open("C:/Users/Nam/Desktop/checkvalidate/checkvalidate/Bai tap 1/dangky.html.html", "_blank");
	    }

		function checkLogin() {
			checkAccount();
			checkPassword();
			if(accountVl.value == taiKhoan.gmail){
				window.location.href = "chitiet.html";
			}
		   	else{
		   		alert('tai khoan khong dung')
		   	}

		}

		// ham kiem tra tai khoan

		function checkAccount(){
			
			var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

			if(accountVl.value == ""){
				document.getElementById("er-accountnotnull").style.display = "block";
				document.getElementById("er-account").style.display = "none";
			}
			
			else if(!re.test(accountVl.value) &&  accountVl.value != "") {
				document.getElementById("er-accountnotnull").style.display = "none";
			    document.getElementById("er-account").style.display = "block";
			} 
			
			else {
			    document.getElementById("er-accountnotnull").style.display = "none";
			    document.getElementById("er-account").style.display = "none";
			}
		}
		//ham kiem tra mat khau
		function checkPassword(){
			if (passwordVl.value == "") {
			    document.getElementById("er-password").style.display = "block";
			} 

			else {
			    document.getElementById("er-password").style.display = "none";
			}
		}



		//tao doi tuong cho trang bang constructor
		// class taiKhoan{
		// 	constructor(ho,ten,namSinh,gmail,matKhau,gmailPhu,diaChi,soDt){
		// 		this.ho = ho;
		// 		this.ten = ten;
		// 		this.namSinh = namSinh;
		// 		this.gmail = gmail;
		// 		this.matKhau = matKhau;
		// 		this.gmailPhu = gmailPhu;
		// 		this.diaChi = diaChi;
		// 		this.soDt = soDt;
		// 	}
		// }
		// var taiKhoan1 = new taiKhoan('Trần','Nam','1997','nam@gmail.com','123456','hihi@gmail.com','Thái Bình','0976809926');
		// var taiKhoan2 = new taiKhoan('Ngụy','Minh','1998','minh@gmail.com','12345678','hehe@gmail.com','Bắc Giang','123456789');
		
		// var danhSachTaiKhoan = [ taiKhoan1, taiKhoan2];


		var login = document.getElementById('login');
		//lay du lieu
		//lay ve chuoi string tu localstorage
		var laydulieu = localStorage.getItem("itemaccount");

		//convert chuoi string thanh json
		var convertdulieu = JSON.parse(laydulieu);

		login.onclick=function(){
			if( (accountVl.value == convertdulieu.taikhoan && passwordVl.value == convertdulieu.matKhau) 
				|| (accountVl.value == convertdulieu.gmail && passwordVl.value == convertdulieu.matKhau )){

				window.location.href = "chitiet.html";


				var dtlogin = JSON.stringify(convertdulieu);

				localStorage.setItem('thongtinlogin',dtlogin);

			


			}
			else{
				console.log("login lose")

			}

			// if( accountVl.value == convertdulieu.taikhoan || (accountVl.value == convertdulieu.gmail )
			// {
			// 	if (passwordVl.value == convertdulieu.matKhau ) {
			// 		console.log("Login wwin")
			// 	}
			// 	else{
			// 		console.log("login lose")
			// 	}
				
			// }
			// else{
			// 	console.log("login lose")
				
			// }



		}

	</script>
</body>
</html>